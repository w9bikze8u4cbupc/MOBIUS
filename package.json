{
  "name": "mobius-games-tutorial-generator",
  "version": "1.0.1",
  "description": "A pipeline for generating game tutorial videos from structured game rules",
  "main": "index.js",
  "type": "module",
  "scripts": {
    "server": "node src/api/index.js",
    "ui": "vite src/ui --port 3000",
    "migrate:data": "node ./scripts/migrate-data.js",
    "test:smoke": "node -e \"fetch('http://localhost:5001/health').then(r=>r.json()).then(x=>console.log(x))\"",
    "verify:unix": "bash ./scripts/verify-phase-e.sh",
    "verify:win": "powershell -ExecutionPolicy Bypass -File .\\scripts\\verify-phase-e.ps1",
    "verify:junit:unix": "bash ./scripts/verify-phase-e-junit.sh",
    "verify:junit:win": "powershell -ExecutionPolicy Bypass -File .\\scripts\\verify-phase-e-junit.ps1",
    "compile-shotlist": "node scripts/compile-shotlist.mjs",
    "bind-alignment": "node scripts/bind-alignment.mjs",
    "render": "node scripts/render.js",
    "demo:observability": "node scripts/demo-observability.js",
    "verify": "node scripts/verify.mjs",
    "test-pipeline": "npm run compile-shotlist && npm run verify && npm run bind-alignment",
    "test": "node --experimental-vm-modules node_modules/jest/bin/jest.js",
    "test:render": "node --experimental-vm-modules node_modules/jest/bin/jest.js src/__tests__/render.orchestration.test.js -i",
    "test:ingest": "node scripts/test-ingestion.js",
    "migrate": "node scripts/migrate-data.js",
    "gen:shotlists": "node scripts/compile-shotlist.mjs gigs/hanamikoji.json > tmp/shotlist.json",
    "gen:timelines": "echo 'Generating timelines...'",
    "render:proxy": "node scripts/render-ffmpeg.mjs tmp/timeline.json assets out/preview.mp4 --preview",
    "golden:check": "npm run golden:check:sushi && npm run golden:check:loveletter",
    "golden:update:sushi": "node scripts/generate_golden.js --game \"Sushi Go\" --in \"out/sushi-go/preview.mp4\" --out \"tests/golden/sushi-go\" --frames \"5,10,20\"",
    "golden:update:loveletter": "node scripts/generate_golden.js --game \"Love Letter\" --in \"out/love-letter/preview.mp4\" --out \"tests/golden/loveletter\" --frames \"5,10,20\"",
    "golden:check:sushi": "node scripts/check_golden.js --game \"Sushi Go\" --in \"out/sushi-go/preview.mp4\" --golden \"tests/golden/sushi-go\" --frames \"5,10,20\" --ssim \"0.995\" --lufs_tol \"1.0\" --tp_tol \"1.0\"",
    "golden:check:loveletter": "node scripts/check_golden.js --game \"Love Letter\" --in \"out/love-letter/preview.mp4\" --golden \"tests/golden/loveletter\" --frames \"5,10,20\" --ssim \"0.995\" --lufs_tol \"1.0\" --tp_tol \"1.0\"",
    "golden:approve": "npm run golden:update:sushi && npm run golden:update:loveletter",
    "golden:check-with-junit": "node scripts/check_golden.js --game \"Hanamikoji\" --in \"out/preview.mp4\" --golden \"tests/golden/hanamikoji\" --frames \"5,10,20\" --ssim \"0.995\" --lufs_tol \"1.0\" --tp_tol \"1.0\" --junit tests/reports/hanamikoji.xml",
    "golden:update": "node scripts/generate_golden.js",
    "golden:check:junit": "node scripts/check_golden.js --junit tests/golden/reports/junit.xml",
    "golden:check:all": "node -e \"const {execSync}=require('child_process'); const games=['hanamikoji']; for(const g of games){ execSync('node scripts/check_golden.js --game \\\"'+g+'\\\" --in \\\"out/preview.mp4\\\" --perOs', {stdio:'inherit'}) }\"",
    "desktop:create": "node scripts/create-desktop-shortcut.mjs",
    "desktop:verify": "node scripts/verify-desktop-shortcuts.mjs",
    "security:check": "node -e \"process.platform === 'win32' ? require('child_process').execSync('powershell -ExecutionPolicy Bypass -File scripts/security-check.ps1', {stdio:'inherit'}) : require('child_process').execSync('bash scripts/security-check.sh', {stdio:'inherit'})\"",
    "security:clean": "node -e \"process.platform === 'win32' ? require('child_process').execSync('powershell -Command \\\"Remove-Item Env:\\GITHUB_TOKEN -ErrorAction SilentlyContinue\\\"', {stdio:'inherit'}) : require('child_process').execSync('unset GITHUB_TOKEN', {stdio:'inherit'})\""
  },
  "keywords": [
    "game",
    "tutorial",
    "video",
    "generator",
    "rules"
  ],
  "author": "Mobius Games",
  "license": "MIT",
  "dependencies": {
    "better-sqlite3": "^9.4.3",
    "minimist": "^1.2.8",
    "multer": "^2.0.2",
    "pdf-parse": "^1.1.1",
    "prom-client": "^15.1.0",
    "typescript": "^5.0.0",
    "xml2js": "^0.6.2",
    "vite": "^4.4.9"
  },
  "devDependencies": {
    "@babel/preset-env": "^7.25.4",
    "@babel/preset-typescript": "^7.24.7",
    "@types/jest": "^29.5.14",
    "@types/node": "^18.0.0",
    "@vitejs/plugin-react": "^4.0.4",
    "babel-jest": "^29.7.0",
    "jest": "^29.7.0",
    "ts-jest": "^29.4.1",
    "ts-node": "^10.9.1"
  },
  "jest": {
    "testEnvironment": "node",
    "transform": {
      "^.+\\.(t|j)sx?$": "babel-jest"
    },
    "moduleNameMapper": {
      "^(\\.{1,2}/.*)\\.js$": "$1"
    },
    "testMatch": [
      "**/__tests__/**/*.(test|spec).(ts|tsx|js)",
      "**/tests/**/*.(test|spec).(ts|tsx|js)"
    ]
  }
}