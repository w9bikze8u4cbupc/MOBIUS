# PR Comment Template - Auto-generated Status

This template can be used by CI systems to automatically post status updates to PRs.

## Basic Status Template

```markdown
## 🚀 MOBIUS dhash Premerge Status

**Status**: ✅ READY / ⚠️ ISSUES / ❌ FAILED  
**Platforms**: Ubuntu ✅ macOS ✅ Windows ✅  
**Artifacts**: [Download Bundle](ARTIFACT_LINK) | **Size**: 2.3MB  
**Backup**: dhash_20240115_143021.zip ✅ verified  
**Quality**: SSIM 0.998 ✅ | LUFS -16.2dB ✅ | TP -2.1dB ✅  
**Approvers**: @reviewer1 ✅ @ops-team ✅ (2/2 required)  
**Deploy**: Ready for production window with @DEPLOY_LEAD

---
*Updated*: 2024-01-15 14:30 UTC | [View Details](WORKFLOW_LINK)
```

## Detailed Status Template

```markdown
## 📋 MOBIUS dhash Deployment Status Report

### ✅ Premerge Validation Complete

**Validation Time**: 2024-01-15 14:25:32 UTC  
**Commit**: `abc1234` on `feature/dhash-production-ready`  
**Duration**: 8m 45s

#### Platform Results
| Platform | Status | Duration | Artifacts |
|----------|--------|----------|-----------|
| Ubuntu 20.04 | ✅ Passed | 3m 12s | Available |
| macOS Latest | ✅ Passed | 4m 33s | Available |
| Windows 2022 | ✅ Passed | 5m 21s | Available |

#### Quality Gates
| Metric | Threshold | Actual | Status |
|--------|-----------|--------|--------|
| SSIM | ≥0.995 | 0.998 | ✅ Pass |
| LUFS | ±1.0 dB | -16.2 dB | ✅ Pass |
| True Peak | ±1.0 dB | -2.1 dB | ✅ Pass |
| Response Time | <200ms | 145ms | ✅ Pass |
| Error Rate | <0.1% | 0.0% | ✅ Pass |

#### Generated Artifacts
- 📦 **Bundle**: [premerge_artifacts_bundle.tar.gz](LINK) (2.3MB)
- 📊 **Reports**: deploy-dryrun.log, postdeploy-smoketests.log
- 💾 **Backup**: dhash_20240115_143021.zip + .sha256 ✅
- 📈 **Monitoring**: monitor_logs/ directory with staging data
- 📋 **Manifest**: Complete file listing and checksums

### 📋 Pre-merge Checklist

- [x] ✅ CI passed on all required platforms
- [x] 📦 Premerge artifacts generated and verified
- [x] 💾 Latest backup integrity confirmed
- [x] 🎯 All quality gates passed
- [x] 🔍 Dry-run validation successful
- [ ] 👥 Required approvals: **1/2** (need @ops approval)
- [ ] 🏷️ Replace `RELEASE_TAG` with actual version
- [ ] 👤 Replace `@DEPLOY_LEAD` with actual lead
- [ ] 📅 Schedule deployment window

### 🚀 Ready for Deployment

**Commands to run after approval:**
```bash
# 1. Merge PR
gh pr merge --repo w9bikze8u4cbupc/MOBIUS --merge-method rebase --delete-branch

# 2. Deploy (replace placeholders)
export RELEASE_TAG="v2.1.0"
export DEPLOY_LEAD="@actual_lead" 
./scripts/deploy_dhash.sh --env production --tag $RELEASE_TAG

# 3. Monitor
./scripts/monitor_dhash.sh --env production --duration 3600
```

**Rollback Plan:**
```bash
LATEST_BACKUP=$(ls -1 backups/dhash*.zip | sort -r | head -n1)
./scripts/rollback_dhash.sh --backup "$LATEST_BACKUP" --env production
```

---

### 📞 Contacts & Next Steps

**Deploy Lead**: @DEPLOY_LEAD *(replace before deploy)*  
**Ops/SRE**: @ops *(approval needed)*  
**Media Engineering**: @media-eng *(review recommended)*  

**Estimated Deploy Time**: 15-30 minutes  
**Monitor Window**: 60 minutes  
**Emergency**: @ops-oncall

---
*Auto-generated by GitHub Actions • Last updated: 2024-01-15 14:30:15 UTC*  
*[View workflow run](WORKFLOW_LINK) • [Download artifacts](ARTIFACT_LINK)*
```

## Issue/Failure Template

```markdown
## ⚠️ MOBIUS dhash Premerge Issues Detected

**Status**: ❌ FAILED  
**Failed Platforms**: Windows 2022  
**Issue**: Quality gate failure - SSIM threshold not met  

### 🔍 Issue Details

**Platform**: Windows 2022  
**Failed Step**: Quality gate validation  
**Error**: SSIM 0.992 < 0.995 (threshold)  

### 📊 Results Summary
| Platform | Status | Issue |
|----------|--------|-------|
| Ubuntu 20.04 | ✅ Passed | - |
| macOS Latest | ✅ Passed | - |
| Windows 2022 | ❌ Failed | SSIM quality gate |

### 🛠️ Recommended Actions

1. **Investigate SSIM failure on Windows**
   - Check FFmpeg version consistency
   - Review video processing pipeline
   - Compare golden reference generation

2. **Review logs**: [Download artifacts](ARTIFACT_LINK)
   - Check `quality_gate_failure.log`
   - Review `golden_check_windows.log`

3. **Fix and re-run**:
   ```bash
   # After fixing issues
   git push  # Triggers new validation
   ```

### 📞 Need Help?

**Media Engineering**: @media-eng (for quality gate issues)  
**Platform Issues**: @ops (for Windows-specific problems)  
**General Support**: Check [troubleshooting guide](DEPLOYMENT_OPERATIONS_GUIDE.md#troubleshooting)

---
*Failure detected at: 2024-01-15 14:28:45 UTC*  
*[View failed workflow](WORKFLOW_LINK) • [Download failure logs](ARTIFACT_LINK)*
```

## Usage Examples

### For GitHub Actions Workflow
```yaml
- name: Post PR status comment
  uses: peter-evans/create-or-update-comment@v4
  with:
    issue-number: ${{ github.event.pull_request.number }}
    body: |
      ## 🚀 MOBIUS dhash Premerge Status
      
      **Status**: ${{ steps.validation.conclusion == 'success' && '✅ READY' || '❌ FAILED' }}
      **Artifacts**: [Download](${{ steps.artifacts.outputs.artifact-url }})
      **Quality**: SSIM ${{ env.SSIM_VALUE }} | LUFS ${{ env.LUFS_VALUE }}
      **Deploy**: ${{ steps.validation.conclusion == 'success' && 'Ready with approvals' || 'Fix issues first' }}
```

### Template Variables to Replace

- `ARTIFACT_LINK` → Actual artifact download URL
- `WORKFLOW_LINK` → GitHub Actions workflow run URL  
- `@DEPLOY_LEAD` → Actual deploy lead username
- `@ops` → Actual ops team/username
- `@media-eng` → Actual media engineering team
- `RELEASE_TAG` → Actual version tag (e.g., v2.1.0)
- Quality values → Actual measured values
- Timestamps → Actual UTC timestamps
- Platform results → Actual CI results